<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Settings â€¢ GHost AI</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#000;
  color:#eaeaf0;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",Inter,Arial,sans-serif;
}
.settings-page{display:flex;height:100vh}

/* SIDEBAR */
.settings-menu{
  width:260px;
  background:rgba(18,18,18,.9);
  border-right:1px solid rgba(255,255,255,.08);
  padding:20px 0;
}
.menu-item{
  padding:14px 22px;
  cursor:pointer;
  font-size:14px;
  color:rgba(255,255,255,.65);
}
.menu-item:hover{color:#fff;background:rgba(255,255,255,.05)}
.menu-item.active{
  color:#c77dff;
  background:rgba(199,125,255,.14);
}

/* CONTENT */
.settings-content{
  flex:1;
  padding:48px 56px;
  overflow-y:auto;
}
.panel{
  display:none;
  max-width:700px;
  background:rgba(255,255,255,.04);
  border-radius:24px;
  padding:40px;
  border:1px solid rgba(255,255,255,.1);
}
.panel.active{display:block}
h2{font-size:24px;margin-bottom:32px}

/* ROWS */
.setting-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 0;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.setting-info{font-size:13px;color:#aaa}
.setting-value{font-size:16px;margin-top:4px}

/* SESSION */
.session{
  display:flex;
  align-items:center;
  gap:14px;
  padding:14px;
  border-radius:14px;
  background:rgba(255,255,255,.05);
  margin-bottom:12px;
  font-size:14px;
}
.device-icon{font-size:20px}
.note{font-size:13px;color:#999}

/* BUTTON */
.btn{
  margin-top:12px;
  padding:14px 24px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-weight:600;
  background:linear-gradient(135deg,#7a2cff,#b26bff);
  color:#fff;
}
.btn.danger{background:#ff4d4d}
</style>
</head>

<body>
<div class="settings-page">

<!-- SIDEBAR -->
<div class="settings-menu">
  <div class="menu-item active" data-panel="account">Account</div>
  <div class="menu-item" data-panel="security">Security</div>
  <div class="menu-item" data-panel="appearance">Appearance</div>
  <div class="menu-item" data-panel="export">Export Chat</div>
  <div class="menu-item" data-panel="sessions">Sessions</div>
  <div class="menu-item" data-panel="danger">Account Deletion</div>
</div>

<!-- CONTENT -->
<div class="settings-content">

<!-- ACCOUNT -->
<div id="panel-account" class="panel active">
<h2>Account</h2>
<div class="setting-row">
  <div>
    <div class="setting-info">Name</div>
    <div class="setting-value">{{ session.name }}</div>
  </div>
</div>
<div class="setting-row">
  <div>
    <div class="setting-info">Email</div>
    <div class="setting-value">{{ session.email }}</div>
    <div class="note">Verification required after change</div>
  </div>
</div>
</div>

<!-- SECURITY -->
<div id="panel-security" class="panel">
<h2>Security</h2>
<button class="btn">Change Password</button>
</div>

<!-- APPEARANCE -->
<div id="panel-appearance" class="panel">
<h2>Appearance</h2>
<button class="btn">Save Theme</button>
</div>

<!-- EXPORT -->
<div id="panel-export" class="panel">
<h2>Export Chat</h2>
<input type="email" placeholder="Enter Gmail">
<button class="btn">Send link</button>
</div>

<!-- âœ… LIVE SESSIONS -->
<div id="panel-sessions" class="panel">
<h2>Active Sessions</h2>
<div id="sessionsContainer">
  <p class="note">Loading sessionsâ€¦</p>
</div>
<button class="btn danger" id="logoutOthers">Log out other devices</button>
</div>

<!-- DANGER -->
<div id="panel-danger" class="panel">
<h2>Danger Zone</h2>
<button class="btn danger">Delete Account</button>
</div>

</div>
</div>

<script>
/* PANEL SWITCH */
document.querySelectorAll(".menu-item").forEach(item=>{
  item.onclick=()=>{
    document.querySelectorAll(".menu-item").forEach(m=>m.classList.remove("active"));
    document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
    item.classList.add("active");
    document.getElementById("panel-"+item.dataset.panel).classList.add("active");
  };
});

/* DEVICE ICON */
function iconFor(device){
  if(device.includes("ðŸ“±")) return "ðŸ“±";
  if(device.includes("ðŸ’»")) return "ðŸ’»";
  return "ðŸŒ";
}

/* LOAD LIVE SESSIONS */
fetch("/settings/sessions")
.then(r=>r.json())
.then(sessions=>{
  const box=document.getElementById("sessionsContainer");
  box.innerHTML="";
  sessions.forEach(s=>{
    const div=document.createElement("div");
    div.className="session";
    div.innerHTML=`
      <span class="device-icon">${s.device}</span>
      <span>${s.browser}</span>
      <span class="note">${s.active ? "Active now" : "Logged out"}</span>
    `;
    box.appendChild(div);
  });
});

/* LOGOUT OTHERS */
document.getElementById("logoutOthers").onclick=()=>{
  fetch("/settings/logout-others",{method:"POST"})
  .then(()=>location.reload());
};
</script>

</body>
</html>